#include <stdio.h>
#include <stdio.h>
#include <locale.h>
#include <time.h>

 int defesa(int d, int a, int v,int o){
    int dt=d*o;
    int at=a*(v/2);
    int ra=at-dt;
    if(ra>0)
        return ra;
    else
        return 0;
 }

 int esquivar(int v, int a, int v1,int o){
    int at=a*(v1/2);
    int es= at-(v*(o*2));
    if(es>0)
        return es;
    else
        return 0;
 }

struct personagem{
    char nome[20];
    int vida;
    int defesa;
    int forca;
    int velocidade;
};

int main(){
    srand(time(NULL));
    setlocale(LC_ALL, "");
    struct personagem j1;
    struct personagem j2;
    char z;
    char r;
    printf("Menu Principal\nDigite 'I' para iniciar o jogo, 'M' para o manual: ");
    scanf("%s",&r);
    do{
    if(r=='I'){
        do{ //jogo rodando
            puts("\nBem-vindo\n\n");
            int a,dano1,dano2;

            j1.vida=1000;
            j2.vida=1000;

            puts("Jogador nº1");
            printf("Digite o nome do seu personagem:");
            scanf(" %19[^\n]s", &j1.nome);
            do{     //personagem 1
                puts("Você possui 60 pontos defina a categoria deles.");
                printf("Pontos de defesa:");
                scanf("%d", &j1.defesa);
                printf("Pontos de força:");
                scanf("%d", &j1.forca);
                printf("Pontos de velocidade:");
                scanf("%d", &j1.velocidade);
                a=j1.velocidade+j1.forca+j1.defesa;
                if(a>60)
                puts("Você ultrapassou o limite permitido, repita novamente");
            }while(a>60);
            int b=0;
            puts("");

            puts("Jogador nº2");
            printf("Digite o nome do seu personagem:");
            scanf(" %19[^\n]s", &j2.nome);
            do{ //personage 2
            puts("Você possui 60 pontos defina a categoria deles.");
            printf("Pontos de defesa:");
            scanf("%d", &j2.defesa);
            printf("Pontos de força:");
            scanf("%d", &j2.forca);
            printf("Pontos de velocidade:");
            scanf("%d", &j2.velocidade);
            b=j2.velocidade+j2.forca+j2.defesa;
            if(b>60)
                puts("Você ultrapassou o limite permitido, repita novamente");
            }while(b>60);

            int e;
            puts("\nDeseja verificar a suas habilidade:");
            puts("1-Sim   2-Não");
            scanf("%d", &e);
            if(e==1){
                printf("%s \t %s\n", j1.nome, j2.nome);
                printf("%d \t %d\n", j1.vida,j2.vida);
                printf("%d \t %d\n", j1.defesa,j2.defesa);
                printf("%d \t %d\n", j1.forca, j2.forca);
                printf("%d \t %d\n", j1.velocidade, j2.velocidade);
                puts("");
            }
            puts("");

            /*puts("O octaedro será jogado, alguma habilidade será multiplicada.");   //dado e habilidade multiplicada
            int j;
            j=1+(rand()%8);
            printf("O valor é:%d\n",j);
            if(j==4 || j==6){
                j1.vida*=j;
                j2.vida*=j;
                printf("A vida de %s atual é: %d", j1.nome,j1.vida);
                printf("\nA vida de %s atual é: %d",j2.nome, j2.vida);
            if(j==1 || j==5){
                j1.forca*=j;
                j2.forca*=j;
                printf("A força de %s atual é: %d", j1.nome,j1.forca);
                printf("\nA força de %s atual é: %d",j2.nome, j2.forca);
            }else if(j==2 || j==3){
                j1.defesa*=j;
                j2.defesa*=j;
                printf("A defesa de %s atual é: %d", j1.nome,j1.defesa);
                printf("\nA defesa de %s atual é: %d",j2.nome, j2.defesa);
            }else if(j==4 || j==6){
                j1.velocidade*=j;
                j2.velocidade*=j;
                printf("A velocidade de %s atual é: %d", j1.nome,j1.velocidade);
                printf("\nA velocidade de %s atual é: %d",j2.nome, j2.velocidade);
            }
            */
            int vr, vr2;
            int esc;
            int h;
            int v;
            int o;
            do{
                printf("\nO octaedro vai ser jogado.");
                v=1+(rand()%8);
                if(v%2==1){     //jogador um
                printf("\n%s vai iniciar jogando", j1.nome);
                do{
                    printf("\n\nJogador %s vai atacar\n", j1.nome);
                    printf("Jogador %s escolha 1 para esquivar ou 2 para defender: ",j2.nome);
                    scanf("%d", &esc);
                    if(esc==1){
                        o=1+(rand()%8);
                        printf("A velocidade %d vai ser multiplicada por:%d,com um bônus duplo 2x\n",j2.velocidade,o);
                        dano1=esquivar(j2.defesa, j1.forca,  j1.velocidade,o);
                        j2.vida=j2.vida-dano1;
                        printf("O dano no %s foi de %d, a vida atual é de: %d", j2.nome, dano1, j2.vida);
                        vr=j1.vida;
                        vr2=j2.vida;
                        if(vr<=0 || vr2<=0)
                            break;
                    }else{
                        o=1+(rand()%8);
                        printf("A defesa %d vai ser multiplicada por:%d\n",j2.defesa,o);
                        dano1=defesa(j2.defesa,j1.forca,j1.velocidade,o);
                        j2.vida=j2.vida-dano1;
                        printf("O dano no %s foi de %d, a vida atual é de: %d", j2.nome, dano1, j2.vida);
                        vr=j1.vida;
                        vr2=j2.vida;
                        if(vr<=0 || vr2<=0)
                            break;
                    }
                    printf("\n\nJogador %s vai atacar",j2.nome);
                    printf("\nJogador %s escolha 1 para esquivar ou 2 para defender: ",j1.nome);
                    scanf("%d", &esc);
                    if(esc==1){
                        printf("A velocidade %d vai ser multiplicada por:%d,com um bônus duplo 2x\n",j1.velocidade,o);
                        dano2=esquivar(j1.defesa, j2.forca,  j2.velocidade,o);
                        j1.vida=j1.vida-dano2;
                        printf("O dano no %s foi de %d, a vida atual é de: %d", j1.nome, dano2, j1.vida);
                        vr=j1.vida;
                        vr2=j2.vida;
                        if(vr<=0 || vr2<=0)
                            break;
                    }else{
                        o=1+(rand()%8);
                        printf("A defesa %d vai ser multiplicada por:%d\n",j1.defesa,o);
                        dano2=defesa(j1.defesa,j2.forca,j2.velocidade,o);
                        j1.vida=j1.vida-dano2;
                        printf("O dano no %s foi de %d, a vida atual é de: %d", j1.nome, dano2, j1.vida);
                        vr=j1.vida;
                        vr2=j2.vida;
                        if(vr<=0 || vr2<=0)
                            break;
                    }
                }while(vr>0 || vr2>0);
                printf("\n\nDigite 1 para jogar novamente ou qualquer tecla para encerrar ");
                scanf("%d",&h);

                }else{      //jogador dois
                    printf("\n%s vai iniciar jogando\n", j2.nome);
                    do{
                        printf("\n\nJogador %s vai atacar", j2.nome);
                        printf("\nJogador %s escolha 1 para esquivar ou 2 para defender: ",j1.nome);
                        scanf("%d", &esc);
                        if(esc==1){
                            printf("A velocidade %d vai ser multiplicada por:%d,com um bônus duplo 2x\n",j1.velocidade,o);
                            dano2=esquivar(j1.defesa, j2.forca,  j2.velocidade,o);
                            j1.vida=j1.vida-dano2;
                            printf("O dano no %s foi de %d, a vida atual é de: %d", j1.nome, dano2, j1.vida);
                            vr=j1.vida;
                            vr2=j2.vida;
                            if(vr<=0 || vr2<=0)
                                break;
                        }else{
                            o=1+(rand()%8);
                            printf("A defesa %d vai ser multiplicada por:%d\n",j1.defesa,o);
                            dano2=defesa(j1.defesa,j2.forca,j2.velocidade,o);
                            j1.vida=j1.vida-dano2;
                            printf("O dano no %s foi de %d, a vida atual é de: %d", j1.nome, dano2, j1.vida);
                            vr=j1.vida;
                            vr2=j2.vida;
                            if(vr<=0 || vr2<=0)
                                break;
                        }
                        printf("\n\nJogador %s vai atacar\n",j1.nome);
                        printf("Jogador %s escolha 1 para esquivar ou 2 para defender: ",j2.nome);
                        scanf("%d", &esc);
                        if(esc==1){
                            o=1+(rand()%8);
                             printf("A velocidade %d vai ser multiplicada por:%d,com um bônus duplo 2x\n",j2.velocidade,o);
                            dano1=esquivar(j2.defesa, j1.forca,  j1.velocidade,o);
                            j2.vida=j2.vida-dano1;
                            printf("O dano no %s foi de %d, a vida atual é de: %d", j2.nome, dano1, j2.vida);
                            vr=j1.vida;
                            vr2=j2.vida;
                            if(vr<=0 || vr2<=0)
                                break;
                        }else{
                            o=1+(rand()%8);
                            printf("A defesa %d vai ser multiplicada por:%d\n",j2.defesa,o);
                            dano1=defesa(j2.defesa,j1.forca,j1.velocidade,o);
                            j2.vida=j2.vida-dano1;
                            printf("O dano no %s foi de %d, a vida atual é de: %d", j2.nome, dano1, j2.vida);
                            vr=j1.vida;
                            vr2=j2.vida;
                            if(vr<=0 || vr2<=0)
                                break;
                        }
                    }while(j1.vida>0 || j2.vida>0);
                    printf("\n\nDigite 1 para jogar novamente ou qualquer tecla para encerrar essa partida: ");
                    scanf("%d",&h);
                }
            }while(h==1);
            printf("\n\nDigite 'A' para reiniciar o jogo ou qualquer tecla para voltar ao menu: ");
            scanf("%s",&z);
        }while(z=='A');

    }else if(r=='M'){
        puts("Manual do jogo");
    }

    printf("\n\nDigite 'I' para iniciar o jogo, 'M' para o manual ou qualquer tecla para encerrar o programa: ");
    scanf("%s",&r);
    }while(r=='I');

    system("PAUSE");

return 0;
}
